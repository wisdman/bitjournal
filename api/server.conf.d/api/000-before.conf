location @forbidden {
  add_header 'Access-Control-Allow-Credentials' 'true' always;
  add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type' always;
  add_header 'Access-Control-Allow-Methods' 'DELETE, GET, HEAD, OPTIONS, POST, PUT' always;
  add_header 'Access-Control-Allow-Origin' '*' always;

  return 403 "Forbidden";
}

error_page 403 @forbidden;

location @options {
  add_header 'Access-Control-Allow-Credentials' 'true' always;
  add_header 'Access-Control-Allow-Headers' 'Authorization, Content-Type' always;
  add_header 'Access-Control-Allow-Methods' 'DELETE, GET, HEAD, OPTIONS, POST, PUT' always;
  add_header 'Access-Control-Allow-Origin' '*' always;

  add_header 'Content-Type' 'text/plain charset=UTF-8' always;
  add_header 'Content-Length' 0 always;

  return 204;
}

error_page 418 =204 @options;

location ~ ^.+\..+$ {
  try_files $uri =404;
}
